<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projecting models in modleR • modleR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Projecting models in modleR">
<meta property="og:description" content="modleR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-162793833-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162793833-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">modleR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/modleR.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/buffer_and_randomPoints.html">Testing background point generation in modleR</a>
    </li>
    <li>
      <a href="../../articles/articles/projection.html">Projecting models in modleR</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Model-R/modleR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="projection_files/header-attrs-2.14/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Projecting models in modleR</h1>
                        <h4 class="author">Andrea Sánchez-Tapia</h4>
            
            <h4 class="date">2022-05-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Model-R/modleR/blob/master/vignettes/articles/projection.Rmd"><code>vignettes/articles/projection.Rmd</code></a></small>
      <div class="hidden name"><code>projection.Rmd</code></div>

    </div>

    
    
<p>Here we explain the setup for projecting models in <strong>modleR</strong>.</p>
<p>Loading required packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.rforge.net/rJava/">rJava</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: package 'raster' was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">maps</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://maptools.r-forge.r-project.org/">maptools</a></span><span class="op">)</span></code></pre></div>
<div id="selecting-one-species-as-an-example" class="section level1">
<h1 class="hasAnchor">
<a href="#selecting-one-species-as-an-example" class="anchor"></a>Selecting one species as an example</h1>
<p>We use the standard dataset inside the package <code>modleR</code>. First, from <code>example_occs</code> object we select only data from one species <em>Abarema langsdorffii</em> and create one training set (70% of the data) and one test set (30% of the data) for the data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Creating an object with species names</span>
<span class="va">especies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">example_occs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="co"># Selecting only coordinates for the first species</span>
<span class="va">coord1sp</span> <span class="op">&lt;-</span> <span class="va">example_occs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span></code></pre></div>
<pre><code>##                       sp     lon     lat
## 343 Abarema_langsdorffii -40.615 -19.921
## 344 Abarema_langsdorffii -40.729 -20.016
## 345 Abarema_langsdorffii -41.174 -20.303
## 346 Abarema_langsdorffii -41.740 -20.493
## 347 Abarema_langsdorffii -42.482 -20.701
## 348 Abarema_langsdorffii -40.855 -17.082</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/dimensions.html">dim</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 104   3</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Subsetting data into training and test</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fl">0.7</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 73</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Making a sample of 70% of species' records</span>
<span class="va">set</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="fl">0.7</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Creating training data set (70% of species' records)</span>
<span class="va">train_set</span> <span class="op">&lt;-</span> <span class="va">coord1sp</span><span class="op">[</span><span class="va">set</span>,<span class="op">]</span>
<span class="co"># Creating test data set (other 30%)</span>
<span class="va">test_set</span> <span class="op">&lt;-</span> <span class="va">coord1sp</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/pkg/generics/man/setops.html">setdiff</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">coord1sp</span><span class="op">)</span>, <span class="va">set</span><span class="op">)</span>, <span class="op">]</span></code></pre></div>
<p>Now lets the check our data points. We plot the traning and test data sets with the first axis of the environmental PCA data from the object <code>example_vars</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># selecting only the first PCA axis</span>
<span class="va">predictor</span> <span class="op">&lt;-</span> <span class="va">example_vars</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co"># transforming the data frame with the coordinates in a spatial object</span>
<span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu">SpatialPoints</span><span class="op">(</span><span class="va">coord1sp</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="co"># ploting environmental layer</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">predictor</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">~</span> <span class="va">lon</span>, data <span class="op">=</span> <span class="va">coord1sp</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></code></pre></div>
<p><img src="projection_files/figure-html/plotdataset-1.png" width="576"></p>
</div>
<div id="fitting-and-projection-datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#fitting-and-projection-datasets" class="anchor"></a>Fitting and projection datasets</h1>
<p>We want to fit everything in a small area around the occurrence points and project it to other sample rasterStack objects.</p>
<p>The structure of folder for projections in modleR is key for this step. In this example we have a folder with environmental data <code>"./env"</code>. The period means “the current working directory” so this is a subfolder, in this case it is besides the folder where the model outputs are created <code>("./models_dir")</code> by default.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">current_wd</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>├── <span class="ex">models_dir</span> etc...</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>└── <span class="fu">env</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    ├── <span class="ex">cropped_proj.tif</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    └── <span class="ex">proj/</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        ├── <span class="ex">proj1/</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var01.tif</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var02.tif</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var03.tif</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        │     └ <span class="ex">var04.tif</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        ├── <span class="ex">proj2/</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var01.tif</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var02.tif</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var03.tif</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        │     └ <span class="ex">var04.tif</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        ├── <span class="ex">proj3/</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var01.tif</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var02.tif</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        │     ├ <span class="ex">var03.tif</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        │     └ <span class="ex">var04.tif</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        └── <span class="ex">proj4/</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>              ├ <span class="ex">var01.tif</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>              ├ <span class="ex">var02.tif</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>              ├ <span class="ex">var03.tif</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>              └ <span class="ex">var04.tif</span></span></code></pre></div>
<p>Note that in this subfolder every projection has its own subfolder, and that all variables have the same names. You can put all the variables (from bio01 to bio19 in Worldclim, for example) and if there’s a variable selection within <code><a href="../../reference/do_any.html">do_any()</a></code> the function will use only the selected variables too.</p>
<p>For performing projections in modleR you only need to pass the address of the folder where the projection variables are <code>proj_data_folder = "./env/proj"</code> and set <code>project_model = TRUE</code>.</p>
<p>We show here the example dataset and one of the projections (<code>proj1</code>)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="st">"./data/env/cropped_proj.tif"</span><span class="op">)</span>
<span class="va">proj_folder</span> <span class="op">&lt;-</span> <span class="st">"./data/env/proj/proj1/"</span>
<span class="va">proj_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">proj_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="va">.</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu">SpatialPoints</span><span class="op">(</span><span class="va">coord1sp</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">example_vars</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, add <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">fit_data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">proj_data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="projection_files/figure-html/dataset2-1.png" width="576"></p>
<p>Models will be fit in the area of the Brazilian Atlantic Forest and projected to the Northern Andes in Colombia.</p>
<div id="model-projection" class="section level2">
<h2 class="hasAnchor">
<a href="#model-projection" class="anchor"></a>Model projection</h2>
<div id="a-simple-model-with-no-buffer-and-no-projection" class="section level3">
<h3 class="hasAnchor">
<a href="#a-simple-model-with-no-buffer-and-no-projection" class="anchor"></a>A simple model with no buffer and no projection:</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># generating sdmdata</span>
<span class="va">sdm_no_proj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/setup_sdmdata.html">setup_sdmdata</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, 
                             occurrences <span class="op">=</span> <span class="va">coord1sp</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
                             predictors<span class="op">=</span><span class="va">fit_data</span>, 
                             models_dir<span class="op">=</span><span class="st">"./projections/"</span>, 
                             clean_dupl <span class="op">=</span> <span class="cn">TRUE</span>, 
                             clean_na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># running models</span>
<span class="va">no_proj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/do_any.html">do_any</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                   predictors <span class="op">=</span> <span class="va">fit_data</span>,
                   models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                   algorithm <span class="op">=</span> <span class="st">"svme"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: `mutate_()` was deprecated in dplyr 0.7.0.
## Please use `mutate()` instead.
## See vignette('programming') for more help
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">no_proj.bc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/present/partitions/svme_cont_Abarema_langsdorffii_1_1.tif"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">no_proj.bc</span><span class="op">)</span>
<span class="fu">maps</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/maps/man/map.html">map</a></span><span class="op">(</span>, , add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="projection_files/figure-html/enm1-1.png" width="576"></p>
</div>
<div id="projections" class="section level3">
<h3 class="hasAnchor">
<a href="#projections" class="anchor"></a>Projections</h3>
<p>We make a series of projections in the specified folder: <code>"./env/proj"</code>. We use function <code><a href="../../reference/do_any.html">do_any()</a></code> and algorithm svme in this example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">fit_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"proj1_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>
<span class="co"># this is just to make sure that all current layers have the same names of the projectio variables.</span>

<span class="va">sdm_yes_proj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/setup_sdmdata.html">setup_sdmdata</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                              occurrences <span class="op">=</span> <span class="va">coord1sp</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
                              predictors <span class="op">=</span> <span class="va">fit_data</span>,
                              models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                              clean_dupl <span class="op">=</span> <span class="cn">TRUE</span>,
                              clean_na <span class="op">=</span> <span class="cn">TRUE</span>,
                              buffer_type <span class="op">=</span> <span class="st">"median"</span>,
                              partition_type <span class="op">=</span> <span class="st">"bootstrap"</span>,
                              boot_n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="va">yes_proj1</span> <span class="op">&lt;-</span> <span class="fu">modleR</span><span class="fu">::</span><span class="fu"><a href="../../reference/do_any.html">do_any</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                            predictors <span class="op">=</span> <span class="va">fit_data</span>,
                            models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                            algo <span class="op">=</span> <span class="st">"svme"</span>,
                            project_model <span class="op">=</span> <span class="cn">TRUE</span>,
                            proj_data_folder <span class="op">=</span> <span class="st">"data/env/proj/"</span>,
                            png_partitions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>The same parameters would work when calling <code><a href="../../reference/do_any.html">do_many()</a></code> (not run here)</p>
<p>We can plot the resulting projections. Note that this is one projection per partition (n = 3).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_1_1.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_1_1.png" width="240"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_2_1.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_2_1.png" width="240"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_3_1.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj1/partitions/svme_cont_Abarema_langsdorffii_3_1.png" width="240"></p>
</div>
</div>
</div>
<div id="final-model-projection" class="section level1">
<h1 class="hasAnchor">
<a href="#final-model-projection" class="anchor"></a>Final model projection</h1>
<p><code><a href="../../reference/final_model.html">final_model()</a></code> has a parameter <code>proj_dir</code> that allows it to be run using any projection. Unlike <code><a href="../../reference/do_any.html">do_any()</a></code> and <code><a href="../../reference/do_any.html">do_many()</a></code> this function needs to be run for each projection. The default projection is <code>"present"</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">final_model_present</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/final_model.html">final_model</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                   models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                                   proj_dir <span class="op">=</span> <span class="st">"present"</span>, 
                                   overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue May 10 13:45:32 2022"</code></pre>
<pre><code>## [1] "DONE svme !"</code></pre>
<p>For the projected models, each <code>proj_dir</code> has to have the name of the projection</p>
<div id="proj1" class="section level3">
<h3 class="hasAnchor">
<a href="#proj1" class="anchor"></a>Proj1</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">final_model_proj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/final_model.html">final_model</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                 models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                                 proj_dir <span class="op">=</span> <span class="st">"proj1"</span>,
                                 overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue May 10 13:45:47 2022"</code></pre>
<pre><code>## [1] "DONE svme !"</code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj1/final_models/Abarema_langsdorffii_svme_raw_mean.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj1/final_models/Abarema_langsdorffii_svme_raw_mean.png" width="240"></p>
</div>
<div id="proj2" class="section level3">
<h3 class="hasAnchor">
<a href="#proj2" class="anchor"></a>Proj2</h3>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">final_model_proj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/final_model.html">final_model</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                 models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                                 proj_dir <span class="op">=</span> <span class="st">"proj2"</span>,
                                 overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue May 10 13:46:06 2022"</code></pre>
<pre><code>## [1] "DONE svme !"</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj2/final_models/Abarema_langsdorffii_svme_raw_mean.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj2/final_models/Abarema_langsdorffii_svme_raw_mean.png" width="240"></p>
</div>
<div id="proj3" class="section level3">
<h3 class="hasAnchor">
<a href="#proj3" class="anchor"></a>Proj3</h3>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">final_model_proj3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/final_model.html">final_model</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                 models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                                 proj_dir <span class="op">=</span> <span class="st">"proj3"</span>,
                                 overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue May 10 13:46:15 2022"</code></pre>
<pre><code>## [1] "DONE svme !"</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj3/final_models/Abarema_langsdorffii_svme_raw_mean.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj3/final_models/Abarema_langsdorffii_svme_raw_mean.png" width="240"></p>
</div>
<div id="proj4" class="section level3">
<h3 class="hasAnchor">
<a href="#proj4" class="anchor"></a>Proj4</h3>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">final_model_proj4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/final_model.html">final_model</a></span><span class="op">(</span>species_name <span class="op">=</span> <span class="va">especies</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                 models_dir <span class="op">=</span> <span class="st">"./projections/"</span>,
                                 proj_dir <span class="op">=</span> <span class="st">"proj4"</span>,
                                 overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue May 10 13:46:23 2022"</code></pre>
<pre><code>## [1] "DONE svme !"</code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">"./projections/Abarema_langsdorffii/proj4/final_models/Abarema_langsdorffii_svme_raw_mean.png"</span><span class="op">)</span></code></pre></div>
<p><img src="projections/Abarema_langsdorffii/proj4/final_models/Abarema_langsdorffii_svme_raw_mean.png" width="240"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/AndreaSanchezTapia">Andrea Sánchez-Tapia</a>, <a href="https://github.com/saramortara">Sara Mortara</a>, Diogo Rocha, Felipe Barros, Guilherme Gall.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
